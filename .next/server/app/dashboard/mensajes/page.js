(()=>{var e={};e.id=544,e.ids=[544],e.modules={30:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\NITRO\\\\Desktop\\\\crmozono\\\\components\\\\layout\\\\DashboardShell.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\NITRO\\Desktop\\crmozono\\components\\layout\\DashboardShell.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},872:(e,t,a)=>{Promise.resolve().then(a.bind(a,4940))},1399:(e,t,a)=>{Promise.resolve().then(a.bind(a,30))},1495:()=>{},2099:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\NITRO\\\\Desktop\\\\crmozono\\\\app\\\\dashboard\\\\mensajes\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\NITRO\\Desktop\\crmozono\\app\\dashboard\\mensajes\\page.tsx","default")},2704:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3236:(e,t,a)=>{"use strict";a.d(t,{N:()=>n,l:()=>o});let s=[{id:"audit-001",action:"lead_status_change",actor:"Agente CO-01",entityId:"lead-001",entityType:"lead",createdAt:new Date(Date.now()-72e5).toISOString(),summary:"Estado actualizado a Contactado"}],n=async(e,t,a,n,o="Sistema")=>{let r={id:`audit-${Math.random().toString(36).slice(2,7)}`,action:e,actor:o,entityType:t,entityId:a,summary:n,createdAt:new Date().toISOString()};return s.unshift(r),r},o=async()=>[...s]},3247:(e,t,a)=>{Promise.resolve().then(a.bind(a,7008))},3249:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(7413),n=a(30);function o({children:e}){return(0,s.jsx)(n.default,{children:e})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4940:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(687),n=a(3210);let o=e=>new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});function r({conversations:e,selectedId:t,onSelect:a}){return(0,s.jsx)("div",{className:"flex flex-col gap-3",children:e.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>a(e.id),className:`flex w-full items-center gap-3 rounded-2xl border px-4 py-3 text-left transition ${t===e.id?"border-botanical-200 bg-botanical-50":"border-botanical-100 bg-white hover:bg-botanical-50/70"}`,children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-botanical-200 text-xs font-semibold text-botanical-800",children:e.initials}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-botanical-900",children:e.leadName}),(0,s.jsx)("p",{className:"text-xs text-botanical-600",children:e.lastMessage})]}),(0,s.jsx)("div",{className:"text-xs text-botanical-500",children:o(e.updatedAt)})]},e.id))})}function i({value:e,onChange:t,onSend:a}){return(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl border border-botanical-100 bg-white p-3",children:[(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"Escribe un mensaje",className:"flex-1 bg-transparent text-sm text-botanical-900 focus:outline-none"}),(0,s.jsx)("button",{type:"button",onClick:a,className:"rounded-xl bg-botanical-700 px-4 py-2 text-xs font-semibold text-white shadow-soft transition hover:bg-botanical-800",children:"Enviar"})]})}function l({messages:e}){return(0,s.jsx)("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto rounded-2xl border border-botanical-100 bg-white p-4",children:e.map(e=>(0,s.jsx)("div",{className:`flex ${"outbound"===e.direction?"justify-end":"justify-start"}`,children:(0,s.jsxs)("div",{className:`max-w-[70%] rounded-2xl px-4 py-3 text-sm shadow-sm ${"outbound"===e.direction?"bg-botanical-700 text-white":"bg-botanical-50 text-botanical-800"}`,children:[(0,s.jsx)("p",{children:e.body}),(0,s.jsx)("p",{className:"mt-2 text-xs opacity-70",children:new Date(e.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})},e.id))})}function d({templates:e,onSelect:t}){return(0,s.jsxs)("div",{className:"rounded-2xl border border-botanical-100 bg-white p-4 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Plantillas aprobadas"}),(0,s.jsx)("div",{className:"mt-4 space-y-3",children:e.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>t(e),className:"w-full rounded-xl border border-botanical-100 bg-botanical-50 px-3 py-3 text-left text-sm text-botanical-800 transition hover:bg-botanical-100",children:[(0,s.jsx)("p",{className:"font-semibold text-botanical-900",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-botanical-600",children:e.preview})]},e.id))})]})}let c=[{id:"conv-001",leadId:"lead-001",leadName:"Mar\xeda Torres",leadPhone:"+57 300 123 4567",initials:"MT",lastMessage:"Gracias, esperar\xe9 el seguimiento.",updatedAt:new Date().toISOString()},{id:"conv-002",leadId:"lead-002",leadName:"Jos\xe9 Mart\xednez",leadPhone:"+52 55 2345 6789",initials:"JM",lastMessage:"\xbfMe puedes enviar la propuesta?",updatedAt:new Date(Date.now()-15e5).toISOString()},{id:"conv-003",leadId:"lead-003",leadName:"Carolina R\xedos",leadPhone:"+56 9 8123 4567",initials:"CR",lastMessage:"Listo, agendemos una llamada.",updatedAt:new Date(Date.now()-36e5).toISOString()}],x=[{id:"msg-001",conversationId:"conv-001",body:"Hola Mar\xeda, gracias por tu inter\xe9s en SuperOzono.",direction:"outbound",createdAt:new Date(Date.now()-48e5).toISOString()},{id:"msg-002",conversationId:"conv-001",body:"\xbfQuieres que te enviemos el plan de instalaci\xf3n?",direction:"outbound",createdAt:new Date(Date.now()-42e5).toISOString()},{id:"msg-003",conversationId:"conv-001",body:"Gracias, esperar\xe9 el seguimiento.",direction:"inbound",createdAt:new Date(Date.now()-36e5).toISOString()},{id:"msg-004",conversationId:"conv-002",body:"Hola Jos\xe9, te comparto la propuesta en breve.",direction:"outbound",createdAt:new Date(Date.now()-18e5).toISOString()},{id:"msg-005",conversationId:"conv-002",body:"\xbfMe puedes enviar la propuesta?",direction:"inbound",createdAt:new Date(Date.now()-15e5).toISOString()},{id:"msg-006",conversationId:"conv-003",body:"\xbfAgendamos una llamada esta semana?",direction:"outbound",createdAt:new Date(Date.now()-54e5).toISOString()},{id:"msg-007",conversationId:"conv-003",body:"Listo, agendemos una llamada.",direction:"inbound",createdAt:new Date(Date.now()-36e5).toISOString()}],m=async(e,t)=>{let a={id:`msg-${Math.random().toString(36).slice(2,7)}`,conversationId:e,body:t,direction:"outbound",createdAt:new Date().toISOString()};x.push(a);let s=c.find(t=>t.id===e);return s&&(s.lastMessage=t,s.updatedAt=a.createdAt),a};var b=a(3236);function u(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(null),[c,x]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[h,f]=(0,n.useState)(""),v=(0,n.useMemo)(()=>e.find(e=>e.id===a)??null,[e,a]),g=async()=>{if(!a||!h.trim())return;let e=await m(a,h.trim());x(t=>[...t,e]),f(""),t(t=>t.map(t=>t.id===a?{...t,lastMessage:e.body,updatedAt:e.createdAt}:t)),await (0,b.N)("message_sent","conversation",a,"Mensaje enviado (simulado)","Agente")};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-botanical-900",children:"Mensajer\xeda"}),(0,s.jsx)("p",{className:"text-sm text-botanical-600",children:"Conversaciones activas y plantillas aprobadas (simulado)."})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_2fr_1fr]",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Conversaciones"}),(0,s.jsx)(r,{conversations:e,selectedId:a,onSelect:o})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-botanical-100 bg-white p-4 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Conversaci\xf3n activa"}),(0,s.jsx)("h2",{className:"mt-2 text-lg font-semibold text-botanical-900",children:v?.leadName??"Selecciona una conversaci\xf3n"}),(0,s.jsx)("p",{className:"text-xs text-botanical-600",children:v?.leadPhone??""})]}),(0,s.jsx)(l,{messages:c}),(0,s.jsx)(i,{value:h,onChange:f,onSend:g})]}),(0,s.jsx)(d,{templates:u,onSelect:e=>{f(e.body)}})]})]})}},6024:(e,t,a)=>{Promise.resolve().then(a.bind(a,2099))},6167:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6444,23)),Promise.resolve().then(a.t.bind(a,6042,23)),Promise.resolve().then(a.t.bind(a,8170,23)),Promise.resolve().then(a.t.bind(a,9477,23)),Promise.resolve().then(a.t.bind(a,9345,23)),Promise.resolve().then(a.t.bind(a,2089,23)),Promise.resolve().then(a.t.bind(a,6577,23)),Promise.resolve().then(a.t.bind(a,1307,23))},6431:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6346,23)),Promise.resolve().then(a.t.bind(a,7924,23)),Promise.resolve().then(a.t.bind(a,5656,23)),Promise.resolve().then(a.t.bind(a,99,23)),Promise.resolve().then(a.t.bind(a,8243,23)),Promise.resolve().then(a.t.bind(a,8827,23)),Promise.resolve().then(a.t.bind(a,2763,23)),Promise.resolve().then(a.t.bind(a,7173,23))},7008:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(687),n=a(3210);function o({onToggleSidebar:e}){return(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-botanical-100 bg-white/90 px-4 backdrop-blur sm:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"inline-flex items-center justify-center rounded-lg border border-botanical-200 bg-botanical-50 px-3 py-2 text-xs font-semibold text-botanical-700 shadow-sm transition hover:bg-botanical-100 lg:hidden",children:"Men\xfa"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-botanical-900",children:"SuperOzono CRM"}),(0,s.jsx)("p",{className:"text-xs text-botanical-600",children:"CRM de ventas multi-pa\xeds"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"hidden text-right text-xs text-botanical-700 sm:block",children:[(0,s.jsx)("p",{className:"font-semibold text-botanical-900",children:"Usuario autenticado"}),(0,s.jsx)("p",{className:"text-botanical-600",children:"admin@crm.local"})]}),(0,s.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-botanical-200 text-xs font-semibold text-botanical-800",children:"AD"})]})]})}var r=a(5814),i=a.n(r);let l=[{label:"Dashboard",href:"/dashboard"},{label:"Leads",href:"/dashboard/leads"},{label:"Tareas",href:"/dashboard/tareas"},{label:"Llamadas",href:"/dashboard/llamadas"},{label:"Mensajes",href:"/dashboard/mensajes"},{label:"Campa\xf1as",href:"/dashboard/campanas"},{label:"Configuraci\xf3n",href:"/dashboard/configuracion"}];function d({isOpen:e,onClose:t}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`fixed inset-0 z-40 bg-black/20 transition-opacity lg:hidden ${e?"opacity-100":"pointer-events-none opacity-0"}`,onClick:t}),(0,s.jsxs)("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 border-r border-botanical-100 bg-white px-6 py-8 shadow-soft transition-transform lg:static lg:translate-x-0 ${e?"translate-x-0":"-translate-x-full"}`,children:[(0,s.jsxs)("div",{className:"mb-8 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-botanical-600 text-sm font-semibold text-white",children:"SO"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-botanical-900",children:"SuperOzono"}),(0,s.jsx)("p",{className:"text-xs text-botanical-600",children:"CRM de ventas"})]})]}),(0,s.jsx)("nav",{className:"flex flex-col gap-2",children:l.map(e=>(0,s.jsx)(i(),{href:e.href,className:"rounded-xl px-3 py-2 text-sm font-medium text-botanical-800 transition hover:bg-botanical-50 hover:text-botanical-900",onClick:t,children:e.label},e.href))}),(0,s.jsxs)("div",{className:"mt-10 rounded-2xl border border-botanical-100 bg-botanical-50 p-4 text-xs text-botanical-700",children:[(0,s.jsx)("p",{className:"font-semibold text-botanical-900",children:"Estado"}),(0,s.jsx)("p",{className:"mt-2",children:"Multi-pa\xeds activo"})]})]})]})}function c({children:e}){let[t,a]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"flex min-h-screen bg-botanical-50",children:[(0,s.jsx)(d,{isOpen:t,onClose:()=>a(!1)}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,s.jsx)(o,{onToggleSidebar:()=>a(e=>!e)}),(0,s.jsx)("main",{className:"flex-1 px-4 py-6 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"rounded-2xl bg-white p-6 shadow-card",children:e})})]})]})}},7793:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>r.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=a(5239),n=a(8088),o=a(8170),r=a.n(o),i=a(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d={children:["",{children:["dashboard",{children:["mensajes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2099)),"C:\\Users\\NITRO\\Desktop\\crmozono\\app\\dashboard\\mensajes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3249)),"C:\\Users\\NITRO\\Desktop\\crmozono\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8014)),"C:\\Users\\NITRO\\Desktop\\crmozono\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\NITRO\\Desktop\\crmozono\\app\\dashboard\\mensajes\\page.tsx"],x={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/dashboard/mensajes/page",pathname:"/dashboard/mensajes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8014:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o,metadata:()=>n});var s=a(7413);a(2704);let n={title:"SuperOzono CRM",description:"CRM de ventas multi-pa\xeds con WhatsApp Business API"};function o({children:e}){return(0,s.jsx)("html",{lang:"es",children:(0,s.jsx)("body",{className:"min-h-screen bg-white text-slate-900",children:e})})}},8367:()=>{},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[825,814],()=>a(7793));module.exports=s})();