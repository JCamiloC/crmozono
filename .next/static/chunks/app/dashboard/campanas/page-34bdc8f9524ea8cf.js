(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{4988:(e,a,t)=>{"use strict";t.d(a,{N:()=>n,l:()=>l});let s=[{id:"audit-001",action:"lead_status_change",actor:"Agente CO-01",entityId:"lead-001",entityType:"lead",createdAt:new Date(Date.now()-72e5).toISOString(),summary:"Estado actualizado a Contactado"}],n=async function(e,a,t,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Sistema",i={id:"audit-".concat(Math.random().toString(36).slice(2,7)),action:e,actor:l,entityType:a,entityId:t,summary:n,createdAt:new Date().toISOString()};return s.unshift(i),i},l=async()=>[...s]},6654:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var s=t(5155),n=t(2115);let l={draft:"bg-slate-100 text-slate-700",scheduled:"bg-amber-100 text-amber-700",running:"bg-botanical-100 text-botanical-700",completed:"bg-emerald-100 text-emerald-700",paused:"bg-rose-100 text-rose-700"},i={draft:"Borrador",scheduled:"Programada",running:"En curso",completed:"Finalizada",paused:"Pausada"};function o(e){let{status:a}=e;return(0,s.jsx)("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ".concat(l[a]),children:i[a]})}function c(e){let{campaign:a,logs:t}=e;return a?(0,s.jsxs)("div",{className:"flex flex-col gap-6 rounded-2xl border border-botanical-100 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Campa\xf1a"}),(0,s.jsx)("h2",{className:"mt-2 text-2xl font-semibold text-botanical-900",children:a.name}),(0,s.jsx)("p",{className:"text-sm text-botanical-600",children:a.segment})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)(o,{status:a.status}),(0,s.jsxs)("span",{className:"text-xs text-botanical-600",children:["Programada: ",new Date(a.scheduledAt).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"grid gap-4 text-sm text-botanical-700 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-botanical-500",children:"Total destinatarios"}),(0,s.jsx)("p",{className:"mt-2 font-semibold text-botanical-900",children:a.totalRecipients})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-botanical-500",children:"Enviados"}),(0,s.jsx)("p",{className:"mt-2 font-semibold text-botanical-900",children:a.sentCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-botanical-500",children:"Fallidos"}),(0,s.jsx)("p",{className:"mt-2 font-semibold text-botanical-900",children:a.failedCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-botanical-500",children:"Tasa de entrega"}),(0,s.jsxs)("p",{className:"mt-2 font-semibold text-botanical-900",children:[a.deliveryRate,"%"]})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-botanical-100 bg-botanical-50 p-4 text-sm text-botanical-700",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Mensaje"}),(0,s.jsx)("p",{className:"mt-2 text-sm font-semibold text-botanical-900",children:a.messagePreview})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-botanical-100 bg-white p-4",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Logs recientes"}),(0,s.jsx)("div",{className:"mt-3 space-y-2 text-xs text-botanical-700",children:t.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e.phone}),(0,s.jsx)("span",{className:"text-botanical-600",children:e.status})]},e.id))})]})]}):(0,s.jsx)("div",{className:"rounded-2xl border border-dashed border-botanical-200 bg-white p-6 text-sm text-botanical-600",children:"Selecciona una campa\xf1a para ver detalles."})}function d(e){let{onSubmit:a}=e;return(0,s.jsxs)("form",{className:"space-y-4 rounded-2xl border border-botanical-100 bg-white p-6 shadow-sm",onSubmit:e=>{e.preventDefault(),a()},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Nueva campa\xf1a"}),(0,s.jsx)("h3",{className:"mt-2 text-xl font-semibold text-botanical-900",children:"Crear campa\xf1a masiva"})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold text-botanical-700",children:["Nombre de campa\xf1a",(0,s.jsx)("input",{className:"rounded-xl border border-botanical-100 px-3 py-2 text-sm focus:border-botanical-400 focus:outline-none focus:ring-2 focus:ring-botanical-100",placeholder:"Ej. Oferta de mantenimiento"})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold text-botanical-700",children:["Segmento",(0,s.jsx)("input",{className:"rounded-xl border border-botanical-100 px-3 py-2 text-sm focus:border-botanical-400 focus:outline-none focus:ring-2 focus:ring-botanical-100",placeholder:"Ej. Leads activos Colombia"})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold text-botanical-700",children:["Plantilla",(0,s.jsxs)("select",{className:"rounded-xl border border-botanical-100 px-3 py-2 text-sm focus:border-botanical-400 focus:outline-none focus:ring-2 focus:ring-botanical-100",children:[(0,s.jsx)("option",{children:"Bienvenida"}),(0,s.jsx)("option",{children:"Seguimiento"}),(0,s.jsx)("option",{children:"Garant\xeda"})]})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-xs font-semibold text-botanical-700",children:["Mensaje",(0,s.jsx)("textarea",{rows:4,className:"rounded-xl border border-botanical-100 px-3 py-2 text-sm focus:border-botanical-400 focus:outline-none focus:ring-2 focus:ring-botanical-100",placeholder:"Mensaje basado en plantilla"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full rounded-xl bg-botanical-700 px-4 py-2 text-sm font-semibold text-white shadow-soft transition hover:bg-botanical-800",children:"Guardar campa\xf1a"})]})}function r(e){let{campaigns:a,selectedId:t,onSelect:n}=e;return(0,s.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>n(e.id),className:"flex w-full items-center justify-between gap-3 rounded-2xl border px-4 py-4 text-left transition ".concat(t===e.id?"border-botanical-200 bg-botanical-50":"border-botanical-100 bg-white hover:bg-botanical-50/70"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-botanical-900",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-botanical-600",children:e.segment})]}),(0,s.jsx)(o,{status:e.status})]},e.id))})}let m=[{id:"cmp-001",name:"Oferta mantenimiento",segment:"Leads activos Colombia",status:"running",scheduledAt:new Date(Date.now()-72e5).toISOString(),totalRecipients:120,sentCount:96,failedCount:4,deliveryRate:80,messagePreview:"Hola {{nombre}}, tenemos una oferta especial..."},{id:"cmp-002",name:"Reactivaci\xf3n Q1",segment:"Leads inactivos M\xe9xico",status:"scheduled",scheduledAt:new Date(Date.now()+864e5).toISOString(),totalRecipients:240,sentCount:0,failedCount:0,deliveryRate:0,messagePreview:"Hola {{nombre}}, queremos compartir una novedad..."},{id:"cmp-003",name:"Garant\xeda extendida",segment:"Clientes recientes Per\xfa",status:"completed",scheduledAt:new Date(Date.now()-2592e5).toISOString(),totalRecipients:80,sentCount:78,failedCount:2,deliveryRate:97,messagePreview:"Gracias por tu compra, tu garant\xeda sigue activa..."}],x=[{id:"log-001",campaignId:"cmp-001",phone:"+57 300 111 2222",status:"enviado"},{id:"log-002",campaignId:"cmp-001",phone:"+57 300 333 4444",status:"enviado"},{id:"log-003",campaignId:"cmp-001",phone:"+57 300 555 6666",status:"fallido"},{id:"log-004",campaignId:"cmp-002",phone:"+52 55 1111 2222",status:"bloqueado"},{id:"log-005",campaignId:"cmp-003",phone:"+51 999 888 777",status:"enviado"}],b=async()=>[...m],p=async e=>{let a={...e,id:"cmp-".concat(Math.random().toString(36).slice(2,7))};return m.push(a),a},u=async e=>x.filter(a=>a.campaignId===e);var h=t(4988);function g(){let[e,a]=(0,n.useState)([]),[t,l]=(0,n.useState)(null),[i,o]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{let e=await b();a(e),e.length>0&&l(e[0].id)})()},[]),(0,n.useEffect)(()=>{(async()=>{t&&o(await u(t))})()},[t]);let m=(0,n.useMemo)(()=>{var a;return null!==(a=e.find(e=>e.id===t))&&void 0!==a?a:null},[e,t]),x=async()=>{let e=await p({name:"Nueva campa\xf1a",segment:"Leads activos",status:"draft",scheduledAt:new Date().toISOString(),totalRecipients:0,sentCount:0,failedCount:0,deliveryRate:0,messagePreview:"Mensaje basado en plantilla"});a(a=>[e,...a]),l(e.id),await (0,h.N)("campaign_created","campaign",e.id,"Campa\xf1a creada (simulada)","Admin")};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-botanical-900",children:"Campa\xf1as masivas"}),(0,s.jsx)("p",{className:"text-sm text-botanical-600",children:"Gesti\xf3n de env\xedos masivos con plantillas aprobadas (simulado)."})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_1.2fr_1fr]",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-botanical-500",children:"Campa\xf1as"}),(0,s.jsx)(r,{campaigns:e,selectedId:t,onSelect:l})]}),(0,s.jsx)(c,{campaign:m,logs:i}),(0,s.jsx)(d,{onSubmit:x})]})]})}},9608:(e,a,t)=>{Promise.resolve().then(t.bind(t,6654))}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(9608)),_N_E=e.O()}]);